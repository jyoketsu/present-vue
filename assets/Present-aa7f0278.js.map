{"version":3,"file":"Present-aa7f0278.js","sources":["../../src/Present.vue"],"sourcesContent":["<template>\n  <div class=\"present\" :tabindex=\"-1\" @keydown=\"handleKeyDown\">\n    <div class=\"present-item-container\" :style=\"containerStyle\">\n      <div class=\"present-item pre-present\">\n        <slot name=\"previous\">previous</slot>\n      </div>\n      <div :class=\"currentClasses\">\n        <slot name=\"current\">current</slot>\n      </div>\n      <div class=\"present-item next-present\">\n        <slot name=\"next\">next</slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref, watch } from \"vue\";\nimport \"./Present.css\";\n\nconst props = withDefaults(\n  defineProps<{\n    currentPage: number;\n    pageCount: number;\n  }>(),\n  {}\n);\n\nconst emit = defineEmits<{\n  (e: \"next\", index: number): void;\n  (e: \"previous\", index: number): void;\n}>();\n\nconst translateY = ref(-100);\nconst transition = ref(true);\nconst shake = ref(false);\nconst controllable = ref(true);\n\nconst containerStyle = computed(() => ({\n  transform: `translateY(${translateY.value}vh)`,\n  transition: transition.value ? \"transform 500ms\" : \"unset\",\n}));\n\nconst currentClasses = computed(() => ({\n  \"present-item\": true,\n  \"current-present\": true,\n  shake: shake.value,\n}));\n\nwatch(\n  () => props.currentPage,\n  () => {\n    transition.value = false;\n  }\n);\n\nwatch(transition, (newVal) => {\n  if (newVal === false) {\n    translateY.value = -100;\n  }\n});\n\nwatch(translateY, (newVal) => {\n  if (newVal === -100) {\n    setTimeout(() => {\n      transition.value = true;\n      controllable.value = true;\n    }, 200);\n  }\n});\n\nconst handleKeyDown = (e: KeyboardEvent) => {\n  if (!controllable.value) {\n    return;\n  }\n  switch (e.key) {\n    case \"ArrowRight\":\n      if (props.currentPage + 1 === props.pageCount) {\n        shake.value = true;\n        setTimeout(() => {\n          shake.value = false;\n        }, 600);\n        return;\n      }\n      translateY.value -= 100;\n      controllable.value = false;\n      setTimeout(() => {\n        emit(\"next\", 1);\n      }, 500);\n\n      break;\n    case \"ArrowLeft\":\n      if (props.currentPage === 0) {\n        shake.value = true;\n        setTimeout(() => {\n          shake.value = false;\n        }, 600);\n        return;\n      }\n      translateY.value += 100;\n      controllable.value = false;\n      setTimeout(() => {\n        emit(\"previous\", 1);\n      }, 500);\n      break;\n    default:\n      break;\n  }\n};\n</script>\n"],"names":["translateY","ref","transition","shake","controllable","containerStyle","computed","currentClasses","watch","props","newVal","handleKeyDown","emit"],"mappings":"yTAiCMA,EAAaC,EAAI,IAAI,EACrBC,EAAaD,EAAI,EAAI,EACrBE,EAAQF,EAAI,EAAK,EACjBG,EAAeH,EAAI,EAAI,EAEvBI,EAAiBC,EAAS,KAAO,CACrC,UAAW,cAAcN,EAAW,WACpC,WAAYE,EAAW,MAAQ,kBAAoB,OACnD,EAAA,EAEIK,EAAiBD,EAAS,KAAO,CACrC,eAAgB,GAChB,kBAAmB,GACnB,MAAOH,EAAM,KACb,EAAA,EAEFK,EACE,IAAMC,EAAM,YACZ,IAAM,CACJP,EAAW,MAAQ,EACrB,CAAA,EAGIM,EAAAN,EAAaQ,GAAW,CACxBA,IAAW,KACbV,EAAW,MAAQ,KACrB,CACD,EAEKQ,EAAAR,EAAaU,GAAW,CACxBA,IAAW,MACb,WAAW,IAAM,CACfR,EAAW,MAAQ,GACnBE,EAAa,MAAQ,IACpB,GAAG,CACR,CACD,EAEK,MAAAO,EAAiB,GAAqB,CACtC,GAACP,EAAa,MAGlB,OAAQ,EAAE,IAAK,CACb,IAAK,aACH,GAAIK,EAAM,YAAc,IAAMA,EAAM,UAAW,CAC7CN,EAAM,MAAQ,GACd,WAAW,IAAM,CACfA,EAAM,MAAQ,IACb,GAAG,EACN,OAEFH,EAAW,OAAS,IACpBI,EAAa,MAAQ,GACrB,WAAW,IAAM,CACfQ,EAAK,OAAQ,CAAC,GACb,GAAG,EAEN,MACF,IAAK,YACC,GAAAH,EAAM,cAAgB,EAAG,CAC3BN,EAAM,MAAQ,GACd,WAAW,IAAM,CACfA,EAAM,MAAQ,IACb,GAAG,EACN,OAEFH,EAAW,OAAS,IACpBI,EAAa,MAAQ,GACrB,WAAW,IAAM,CACfQ,EAAK,WAAY,CAAC,GACjB,GAAG,EACN,KAGJ,CAAA"}